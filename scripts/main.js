"use strict";window.g_bjV=class{constructor(e,g){this.g_aYl=e,this.g_bjW=g,this.g_bjX=!1,this.g_aXq=()=>this.g_asW()}g_bjY(){}g_bjZ(e,g,_,n){this.g_aYl.g_bj_(this.g_bjW,e,g,_,n)}g_bj$(e,g,_,n){return this.g_aYl.g_bka(this.g_bjW,e,g,_,n)}g_bkb(e,g,_){this.g_aYl.g_bkc()?this.g_bjZ(e,g,_):this.g_aYl.g_bkd()._OnMessageFromDOM({type:"event",component:this.g_bjW,handler:e,dispatchOpts:_||null,data:g,responseId:null})}g_bke(e,g){this.g_aYl.g_bkf(this.g_bjW,e,g)}g_bkg(e){for(const[g,_]of e)this.g_bke(g,_)}g_bkh(){return this.g_aYl}g_bki(){return this.g_bjW}g_aL_(){this.g_bjX||(this.g_aYl.g_bkj(this.g_aXq),this.g_bjX=!0)}g_aLL(){this.g_bjX&&(this.g_aYl.g_bkk(this.g_aXq),this.g_bjX=!1)}g_asW(){}},"use strict",window.g_bkl=class extends g_bjV{constructor(e,g){super(e,g),this.g_bkm=new Map,this.g_bkn=!0,this.g_bke("create",e=>this.g_bko(e)),this.g_bke("destroy",e=>this.g_bkp(e)),this.g_bke("set-visible",e=>this.g_bkq(e)),this.g_bke("update-position",e=>this.g_bkr(e)),this.g_bke("update-state",e=>this.g_beD(e)),this.g_bke("focus",e=>this.g_bks(e)),this.g_bke("set-css-style",e=>this.g_bkt(e))}g_bku(e){this.g_bkn=!!e}g_bkv(e,g){this.g_bke(e,e=>{const _=e.elementId,n=this.g_bkm.get(_);return g(n,e)})}g_bko(e){const g=e.elementId,_=this.g_aMx(g,e);this.g_bkm.set(g,_),e.isVisible||(_.style.display="none"),this.g_bkn&&document.body.appendChild(_)}g_aMx(){throw new Error("required override")}g_bkw(){}g_bkp(e){const g=e.elementId,_=this.g_bkm.get(g);this.g_bkw(_),this.g_bkn&&_.parentElement.removeChild(_),this.g_bkm.delete(g)}g_bkx(e,g,_){_||(_={}),_.elementId=g,this.g_bjZ(e,_)}g_bky(e,g,_){_||(_={}),_.elementId=g,this.g_bkb(e,_)}g_bkq(e){if(this.g_bkn){const g=this.g_bkm.get(e.elementId);g.style.display=e.isVisible?"":"none"}}g_bkr(e){if(this.g_bkn){const g=this.g_bkm.get(e.elementId);g.style.left=e.left+"px",g.style.top=e.top+"px",g.style.width=e.width+"px",g.style.height=e.height+"px";const _=e.fontSize;null!==_&&(g.style.fontSize=_+"em")}}g_beD(e){const g=this.g_bkm.get(e.elementId);this.g_bkz(g,e)}g_bkz(){throw new Error("required override")}g_bks(e){const g=this.g_bkm.get(e.elementId);e.focus?g.focus():g.blur()}g_bkt(e){const g=this.g_bkm.get(e.elementId);g.style[e.prop]=e.val}g_bkA(e){return this.g_bkm.get(e)}},"use strict";{function _(e){return new Promise((g,_)=>{const n=document.createElement("script");n.onload=g,n.onerror=_,n.async=!1,n.src=e,document.head.appendChild(n)})}async function n(e){const g=await t(e),_=new TextDecoder("utf-8");return _.decode(g)}function t(e){return new Promise((g,_)=>{const n=new FileReader;n.onload=e=>g(e.target.result),n.onerror=e=>_(e),n.readAsArrayBuffer(e)})}const b=/(iphone|ipod|ipad)/i.test(navigator.userAgent);let a=new Audio;const o={"audio/webm; codecs=opus":!!a.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!a.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!a.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!a.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!a.canPlayType("audio/mp4"),"audio/mpeg":!!a.canPlayType("audio/mpeg")};a=null;const e=[];let g=0;window.RealFile=window.File;const p=[],i=new Map,r=new Map;let s=0;const l=[];self.g_bkB=function(e){if("function"!=typeof e)throw new Error("runOnStartup called without a function");l.push(e)},window.g_bkC=class d{constructor(e){this.g_bkD=e.g_bkE,this.g_bkF=null,this.g_aWp="",this.g_bkG=e.g_bkH,this.g_bkI={},this.g_bkJ=null,this.g_bkK=null,this.g_bkL=[],this.g_bkM=null,this.g_aUv=null,this.g_aYf=null,this.g_aVc=-1,this.g_bkN=()=>this.g_bkO(),this.g_bkP=[],this.g_aWu=e.g_fE,("cordova"===this.g_aWu||"playable-ad"===this.g_aWu||"instant-games"===this.g_aWu)&&this.g_bkD&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in WebViews due to crbug.com/923007. Reverting to DOM mode."),this.g_bkD=!1),/CrOS/.test(navigator.userAgent)&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in Chrome OS due to reports of crashes. Reverting to DOM mode."),this.g_bkD=!1),this.g_bkQ=!1,this.g_bkR=null,("html5"===this.g_aWu||"playable-ad"===this.g_aWu)&&"file"===location.protocol.substr(0,4)&&alert("Exported games won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)"),this.g_bkf("runtime","cordova-fetch-local-file",e=>this.g_bkS(e)),this.g_bkf("runtime","create-job-worker",e=>this.g_bkT(e)),"cordova"===this.g_aWu?document.addEventListener("deviceready",()=>this.g_aKO(e)):this.g_aKO(e)}g_RE(){this.g_bkU(),this.g_bkF&&(this.g_bkF.onmessage=null,this.g_bkF=null),this.g_bkJ&&(this.g_bkJ.terminate(),this.g_bkJ=null),this.g_bkK&&(this.g_bkK.g_RE(),this.g_bkK=null),this.g_aUv&&(this.g_aUv.parentElement.removeChild(this.g_aUv),this.g_aUv=null)}g_bkV(){return this.g_aUv}g_Sh(){return this.g_aWp}g_bkc(){return this.g_bkD}g_aZI(){return this.g_aWu}g_aYD(){return"cordova"===this.g_aWu&&b}g_bkW(){return"cordova"===this.g_aWu&&!1===b}async g_aKO(e){if("playable-ad"===this.g_aWu){this.g_bkR=self.c3_base64files,await this.g_bkX();for(let g=0,_=e.g_bkY.length;g<_;++g){const _=e.g_bkY[g].toLowerCase();this.g_bkR.hasOwnProperty(_)&&(e.g_bkY[g]=URL.createObjectURL(this.g_bkR[_]))}}if(e.g_bkZ)this.g_aWp=e.g_bkZ;else{const e=location.origin;this.g_aWp=("null"===e?"file:///":e)+location.pathname;const g=this.g_aWp.lastIndexOf("/");-1!==g&&(this.g_aWp=this.g_aWp.substr(0,g+1))}if(e.g_bk_)for(const[g,_]of Object.entries(e.g_bk_))this.g_bkI[g]=URL.createObjectURL(_);const g=new MessageChannel;this.g_bkF=g.port1,this.g_bkF.onmessage=e=>this._OnMessageFromRuntime(e.data),window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(e=>this.g_bk$(e)),this.g_aYf=new self.g_bla(this),await this.g_aYf.g_aRG(),this.g_blb(),"object"==typeof window.StatusBar&&window.StatusBar.hide(),"object"==typeof window.AndroidFullScreen&&window.AndroidFullScreen.immersiveMode(),await this.g_blc(),this.g_bkD?await this.g_bld(e,g.port2):await this.g_ble(e,g.port2)}g_blf(e){return this.g_bkI.hasOwnProperty(e)?this.g_bkI[e]:e.endsWith("/workermain.js")&&this.g_bkI.hasOwnProperty("workermain.js")?this.g_bkI["workermain.js"]:"playable-ad"===this.g_aWu&&this.g_bkR.hasOwnProperty(e.toLowerCase())?URL.createObjectURL(this.g_bkR[e.toLowerCase()]):e}async g_blg(g,_,n){if(g.startsWith("blob:"))return new Worker(g,n);if(this.g_aYD()){const e=await this.g_akC(this.g_bkG+g),_=new Blob([e],{type:"application/javascript"});return new Worker(URL.createObjectURL(_),n)}const t=new URL(g,_),b=location.origin!==t.origin;if(b){const e=await fetch(t);if(!e.ok)throw new Error("failed to fetch worker script");const g=await e.blob();return new Worker(URL.createObjectURL(g),n)}return new Worker(t,n)}g_blb(){if(this.g_aYD()){const g=document.documentElement.style,_=document.body.style,n=window.innerWidth<window.innerHeight,b=n?window.screen.width:window.screen.height,t=n?window.screen.height:window.screen.width;_.height=g.height=t+"px",_.width=g.width=b+"px"}}g_blh(e){return{baseUrl:this.g_aWp,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,isFullscreen:d.g_aVD(),projectData:e.g_bli,previewImageBlobs:window.cr_previewImageBlobs||this.g_bkR,previewProjectFileBlobs:window.cr_previewProjectFileBlobs,exportType:e.g_fE,isDebug:-1<self.location.search.indexOf("debug"),ife:!!self.g_blj,jobScheduler:this.g_aYf.g_blk(),supportedAudioFormats:o,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.g_bkG+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.g_bkG+"opus.wasm.wasm",isWKWebView:this.g_aYD(),isFBInstantAvailable:"undefined"!=typeof self.FBInstant}}async g_bld(e,g){const _=this.g_blf(e.g_bll);this.g_bkJ=await this.g_blg(_,this.g_aWp,{name:"Runtime"}),this.g_aUv=document.createElement("canvas"),this.g_aUv.style.display="none";const n=this.g_aUv.transferControlToOffscreen();document.body.appendChild(this.g_aUv),window.c3canvas=this.g_aUv,this.g_bkJ.postMessage(Object.assign(this.g_blh(e),{type:"init-runtime",isInWorker:!0,messagePort:g,canvas:n,workerDependencyScripts:e.g_blm||[],engineScripts:e.g_bkY,projectScripts:window.g_bln,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[g,n,...this.g_aYf.g_blo()]),this.g_bkL=p.map(e=>new e(this)),this.g_blp(),self.c3_callFunction=(e,g)=>this.g_bkM.g_aCF(e,g),"preview"===this.g_aWu&&(self.goToLastErrorScript=()=>this.g_bj_("runtime","go-to-last-error-script"))}async g_ble(g,n){this.g_aUv=document.createElement("canvas"),this.g_aUv.style.display="none",document.body.appendChild(this.g_aUv),window.c3canvas=this.g_aUv,this.g_bkL=p.map(e=>new e(this)),this.g_blp();const b=g.g_bkY.map(e=>new URL(e,this.g_aWp).toString());if(Array.isArray(g.g_blm)&&b.unshift(...g.g_blm),await Promise.all(b.map(e=>_(e))),g.g_blq&&0<g.g_blq.length){const e=self.C3_ProjectScriptsStatus;try{if(await Promise.all(g.g_blq.map(e=>_(e[1]))),Object.values(e).some(e=>!e))return void self.setTimeout(()=>this.g_blr(e),100)}catch(g){return console.error("[Preview] Error loading project scripts: ",g),void self.setTimeout(()=>this.g_blr(e),100)}}if("preview"===this.g_aWu&&"object"!=typeof self.g_Or.g_bjU)return console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),void alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.");const t=Object.assign(this.g_blh(g),{isInWorker:!1,messagePort:n,canvas:this.g_aUv,runOnStartupFunctions:l});this.g_bkK=self.C3_CreateRuntime(t),await self.C3_InitRuntime(this.g_bkK,t)}g_blr(e){const g=Object.entries(e).filter(e=>!e[1]).map(e=>e[0]),_=`Failed to load project script '${g[0]}'. Check all your JavaScript code has valid syntax.`;console.error("[Preview] "+_),alert(_)}async g_bkT(){const e=await this.g_aYf.g_bls();return{outputPort:e,transferables:[e]}}g_bkd(){if(this.g_bkD)throw new Error("not available in worker mode");return this.g_bkK}g_bj_(g,_,n,b,t){this.g_bkF.postMessage({type:"event",component:g,handler:_,dispatchOpts:b||null,data:n,responseId:null},this.g_bkQ?void 0:t)}g_bka(_,n,b,t,a){const e=s++,o=new Promise((g,_)=>{r.set(e,{resolve:g,reject:_})});return this.g_bkF.postMessage({type:"event",component:_,handler:n,dispatchOpts:t||null,data:b,responseId:e},this.g_bkQ?void 0:a),o}["_OnMessageFromRuntime"](e){const g=e.type;if("event"===g)this.g_blt(e);else if("result"===g)this.g_blu(e);else if("runtime-ready"===g)this.g_blv();else if("alert"===g)alert(e.message);else throw new Error(`unknown message '${g}'`)}g_blt(_){const n=_.component,b=_.handler,t=_.data,o=_.responseId,e=i.get(n);if(!e)return void console.warn(`[DOM] No event handlers for component '${n}'`);const a=e.get(b);if(!a)return void console.warn(`[DOM] No handler '${b}' for component '${n}'`);let g=null;try{g=a(t)}catch(e){return console.error(`Exception in '${n}' handler '${b}':`,e),void(null!==o&&this.g_blw(o,!1,e.toString()))}null!==o&&(g&&g.then?g.then(e=>this.g_blw(o,!0,e)).catch(e=>{console.error(`Rejection from '${n}' handler '${b}':`,e),this.g_blw(o,!1,e.toString())}):this.g_blw(o,!0,g))}g_blw(e,g,_){let n;_&&_.transferables&&(n=_.transferables),this.g_bkF.postMessage({type:"result",responseId:e,isOk:g,result:_},n)}g_blu(g){const _=g.responseId,n=g.isOk,b=g.result,t=r.get(_);n?t.resolve(b):t.reject(b),r.delete(_)}g_bkf(e,g,_){let n=i.get(e);if(n||(n=new Map,i.set(e,n)),n.has(g))throw new Error(`[DOM] Component '${e}' already has handler '${g}'`);n.set(g,_)}static g_blx(e){if(p.includes(e))throw new Error("DOM handler already added");p.push(e)}g_blp(){for(const e of this.g_bkL)if("runtime"===e.g_bki())return void(this.g_bkM=e);throw new Error("cannot find runtime DOM handler")}g_bk$(e){this.g_bj_("debugger","message",e)}g_blv(){for(const e of this.g_bkL)e.g_bjY()}static g_aVD(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}async g_bly(){return await this.g_bka("runtime","get-remote-preview-status-info")}g_bkj(e){this.g_bkP.push(e),this.g_blz()}g_bkk(e){const g=this.g_bkP.indexOf(e);if(-1===g)throw new Error("invalid callback");this.g_bkP.splice(g,1),this.g_bkP.length||this.g_bkU()}g_blz(){-1===this.g_aVc&&this.g_bkP.length&&(this.g_aVc=requestAnimationFrame(this.g_bkN))}g_bkU(){-1!==this.g_aVc&&(cancelAnimationFrame(this.g_aVc),this.g_aVc=-1)}g_bkO(){this.g_aVc=-1;for(const e of this.g_bkP)e();this.g_blz()}g_blA(e){this.g_bkM.g_blA(e)}g_blB(e){this.g_bkM.g_blB(e)}g_blC(){this.g_bkM.g_blC()}g_DU(e){this.g_bkM.g_DU(e)}g_akX(e){return!!o[e]}async g_aNN(e){const g=await this.g_bka("runtime","opus-decode",{arrayBuffer:e},null,[e]);return new Float32Array(g)}g_SM(e){return /^(?:[a-z]+:)?\/\//.test(e)||"data:"===e.substr(0,5)||"blob:"===e.substr(0,5)}g_SN(e){return!this.g_SM(e)}async g_bkS(e){const g=e.filename;switch(e.as){case"text":return await this.g_akD(g);case"buffer":return await this.g_akC(g);default:throw new Error("unsupported type");}}g_blD(e){const g=window.cordova.file.applicationDirectory+"www/"+e.toLowerCase();return new Promise((e,_)=>{window.resolveLocalFileSystemURL(g,g=>{g.file(e,_)},_)})}async g_akD(e){const g=await this.g_blD(e);return await n(g)}g_blE(){if(e.length&&!(8<=g)){g++;const _=e.shift();this.g_blF(_.filename,_.g_pd,_.g_pe)}}g_akC(_){return new Promise((n,b)=>{e.push({filename:_,g_pd:e=>{g--,this.g_blE(),n(e)},g_pe:e=>{g--,this.g_blE(),b(e)}}),this.g_blE()})}async g_blF(g,_,e){try{const n=await this.g_blD(g),b=await t(n);_(b)}catch(g){e(g)}}async g_bkX(){const e=[];for(const[g,_]of Object.entries(this.g_bkR))e.push(this.g_blG(g,_));await Promise.all(e)}async g_blG(e,g){if("object"==typeof g)this.g_bkR[e]=new Blob([g.str],{type:g.type});else{const _=await fetch(g),n=await _.blob();this.g_bkR[e]=n}}g_blc(){let e=null;const g=new Promise(g=>e=g),_=new ArrayBuffer(1),n=new MessageChannel;return n.port2.onmessage=g=>{g.data&&g.data.arrayBuffer||(this.g_bkQ=!0,console.warn("MessageChannel transfers determined to be broken. Disabling transferables.")),e()},n.port1.postMessage({arrayBuffer:_},[_]),g}}}{function _(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||e.originalEvent&&e.originalEvent.sourceCapabilities&&e.originalEvent.sourceCapabilities.firesTouchEvents}function t(e){return new Promise((g,_)=>{const n=document.createElement("link");n.onload=()=>g(n),n.onerror=e=>_(e),n.rel="stylesheet",n.href=e,document.head.appendChild(n)})}function a(e){return new Promise((g,_)=>{const n=new Image;n.onload=()=>g(n),n.onerror=e=>_(e),n.src=e})}async function p(e){const g=URL.createObjectURL(e);try{return await a(g)}finally{URL.revokeObjectURL(g)}}function r(e){do{if(e.parentNode&&e.hasAttribute("contenteditable"))return!0;e=e.parentNode}while(e);return!1}function s(e){const g=e.target.tagName.toLowerCase();l.has(g)&&e.preventDefault()}function e(e){(e.metaKey||e.ctrlKey)&&e.preventDefault()}function g(){try{return window.parent&&window.parent.document.hasFocus()}catch(e){return!1}}const d=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),i={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},u={dispatchUserScriptEvent:!0},c={dispatchRuntimeEvent:!0},l=new Set(["canvas","body","html"]);self.C3_RasterSvgImage=async function(g,_,n){const b=document.createElement("canvas");b.width=_,b.height=n;const t=b.getContext("2d");return t.drawImage(g,0,0,_,n),b};let b=!1;document.addEventListener("pause",()=>b=!0),document.addEventListener("resume",()=>b=!1);const n=class extends g_bjV{constructor(g){super(g,"runtime"),this.g_blH=!0,this.g_blI=-1,this.g_blJ="any",this.g_blK=!1,this.g_blL=!1,this.g_blM=null,g.g_bkf("canvas","update-size",e=>this.g_blN(e)),g.g_bkf("runtime","invoke-download",e=>this.g_blO(e)),g.g_bkf("runtime","raster-svg-image",e=>this.g_blP(e)),g.g_bkf("runtime","set-target-orientation",e=>this.g_blQ(e)),g.g_bkf("runtime","register-sw",()=>this.g_blR()),g.g_bkf("runtime","post-to-debugger",e=>this.g_blS(e)),g.g_bkf("runtime","go-to-script",e=>this.g_blS(e)),g.g_bkf("runtime","before-start-ticking",()=>this.g_blT()),g.g_bkf("runtime","debug-highlight",e=>this.g_blU(e)),g.g_bkf("runtime","enable-device-orientation",()=>this.g_blV()),g.g_bkf("runtime","enable-device-motion",()=>this.g_blW()),g.g_bkf("runtime","add-stylesheet",e=>this.g_blX(e));const _=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",e=>{const g=e.target,n=g.tagName.toLowerCase();_.has(n)||r(g)||e.preventDefault()}),window.addEventListener("selectstart",s),window.addEventListener("gesturehold",s),window.addEventListener("touchstart",s,{passive:!1});const n=g.g_bkV();"undefined"==typeof PointerEvent?n.addEventListener("touchstart",s):(window.addEventListener("pointerdown",s,{passive:!1}),n.addEventListener("pointerdown",s)),this.g_blY=0,window.addEventListener("mousedown",e=>{1===e.button&&e.preventDefault()}),window.addEventListener("mousewheel",e,{passive:!1}),window.addEventListener("wheel",e,{passive:!1}),window.addEventListener("resize",()=>this.g_aVq()),this.g_blZ=new Set,this.g_bl_=new WeakSet,this.g_bev=!1}g_blT(){return"cordova"===this.g_aYl.g_aZI()?(document.addEventListener("pause",()=>this.g_aYh(!0)),document.addEventListener("resume",()=>this.g_aYh(!1))):document.addEventListener("visibilitychange",()=>this.g_aYh(document.hidden)),{isSuspended:!!(document.hidden||b)}}g_bjY(){window.addEventListener("focus",()=>this.g_bl$("window-focus")),window.addEventListener("blur",()=>{this.g_bl$("window-blur",{parentHasFocus:g()}),this.g_blY=0}),window.addEventListener("fullscreenchange",()=>this.g_aVr()),window.addEventListener("webkitfullscreenchange",()=>this.g_aVr()),window.addEventListener("mozfullscreenchange",()=>this.g_aVr()),window.addEventListener("fullscreenerror",e=>this.g_aVs(e)),window.addEventListener("webkitfullscreenerror",e=>this.g_aVs(e)),window.addEventListener("mozfullscreenerror",e=>this.g_aVs(e)),window.addEventListener("keydown",e=>this.g_bma("keydown",e)),window.addEventListener("keyup",e=>this.g_bma("keyup",e)),window.addEventListener("dblclick",e=>this.g_bmb("dblclick",e,i)),window.addEventListener("wheel",e=>this.g_bmc("wheel",e)),"undefined"==typeof PointerEvent?(window.addEventListener("mousedown",e=>this.g_bmd("pointerdown",e)),window.addEventListener("mousemove",e=>this.g_bmd("pointermove",e)),window.addEventListener("mouseup",e=>this.g_bmd("pointerup",e)),window.addEventListener("touchstart",e=>this.g_bme("pointerdown",e)),window.addEventListener("touchmove",e=>this.g_bme("pointermove",e)),window.addEventListener("touchend",e=>this.g_bme("pointerup",e)),window.addEventListener("touchcancel",e=>this.g_bme("pointercancel",e))):(window.addEventListener("pointerdown",e=>this.g_bmf("pointerdown",e)),window.addEventListener("pointermove",e=>this.g_bmf("pointermove",e)),window.addEventListener("pointerup",e=>this.g_bmf("pointerup",e)),window.addEventListener("pointercancel",e=>this.g_bmf("pointercancel",e)));const e=()=>this.g_blC();window.addEventListener("pointerup",e,!0),window.addEventListener("touchend",e,!0),window.addEventListener("click",e,!0),window.addEventListener("keydown",e,!0),window.addEventListener("gamepadconnected",e,!0)}g_bl$(e,g){this.g_bjZ(e,g||null,c)}g_bmg(){return Math.max(window.innerWidth,1)}g_bmh(){return Math.max(window.innerHeight,1)}g_aVq(){const e=this.g_bmg(),g=this.g_bmh();this.g_bl$("window-resize",{innerWidth:e,innerHeight:g,devicePixelRatio:window.devicePixelRatio}),this.g_aYl.g_aYD()&&(-1!==this.g_blI&&clearTimeout(this.g_blI),this.g_bmi(e,g,0))}g_bmj(e,g,_){-1!==this.g_blI&&clearTimeout(this.g_blI),this.g_blI=setTimeout(()=>this.g_bmi(e,g,_),48)}g_bmi(g,_,n){const b=this.g_bmg(),t=this.g_bmh();this.g_blI=-1,b!=g||t!=_?this.g_bl$("window-resize",{innerWidth:b,innerHeight:t,devicePixelRatio:window.devicePixelRatio}):10>n&&this.g_bmj(b,t,n+1)}g_blQ(e){this.g_blJ=e.targetOrientation}g_bmk(){const e=this.g_blJ;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(e).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let g=!1;screen.lockOrientation?g=screen.lockOrientation(e):screen.webkitLockOrientation?g=screen.webkitLockOrientation(e):screen.mozLockOrientation?g=screen.mozLockOrientation(e):screen.msLockOrientation&&(g=screen.msLockOrientation(e)),g||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_aVr(){const e=g_bkC.g_aVD();e&&"any"!==this.g_blJ&&this.g_bmk(),this.g_bjZ("fullscreenchange",{isFullscreen:e,innerWidth:this.g_bmg(),innerHeight:this.g_bmh()})}g_aVs(e){console.warn("[Construct 3] Fullscreen request failed: ",e),this.g_bjZ("fullscreenerror",{isFullscreen:g_bkC.g_aVD(),innerWidth:this.g_bmg(),innerHeight:this.g_bmh()})}g_aYh(e){e?this.g_aYl.g_bkU():this.g_aYl.g_blz(),this.g_bjZ("visibilitychange",{hidden:e})}g_bma(e,g){const _=d.get(g.code)||g.code;this.g_bkb(e,{code:_,key:g.key,which:g.which,repeat:g.repeat,altKey:g.altKey,ctrlKey:g.ctrlKey,metaKey:g.metaKey,shiftKey:g.shiftKey,timeStamp:g.timeStamp},i)}g_bmc(e,g){this.g_bjZ(e,{clientX:g.clientX,clientY:g.clientY,deltaX:g.deltaX,deltaY:g.deltaY,deltaZ:g.deltaZ,deltaMode:g.deltaMode,timeStamp:g.timeStamp},i)}g_bmb(e,g,n){_(g)||("mousedown"===e&&window!==window.top&&window.focus(),this.g_bkb(e,{button:g.button,buttons:g.buttons,clientX:g.clientX,clientY:g.clientY,timeStamp:g.timeStamp},n))}g_bmd(e,g){if(!_(g)){"pointerdown"===e&&window!==window.top&&window.focus();const _=this.g_blY;"pointerdown"===e&&0!==_?e="pointermove":"pointerup"==e&&0!==g.buttons&&(e="pointermove"),this.g_bkb(e,{pointerId:1,pointerType:"mouse",button:g.button,buttons:g.buttons,lastButtons:_,clientX:g.clientX,clientY:g.clientY,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:g.timeStamp},i),this.g_blY=g.buttons,this.g_bmb(g.type,g,u)}}g_bmf(e,g){"pointerdown"===e&&window!==window.top&&window.focus();let _=0;if("mouse"===g.pointerType&&(_=this.g_blY),this.g_bkb(e,{pointerId:g.pointerId,pointerType:g.pointerType,button:g.button,buttons:g.buttons,lastButtons:_,clientX:g.clientX,clientY:g.clientY,width:g.width||0,height:g.height||0,pressure:g.pressure||0,tangentialPressure:g.tangentialPressure||0,tiltX:g.tiltX||0,tiltY:g.tiltY||0,twist:g.twist||0,timeStamp:g.timeStamp},i),"mouse"===g.pointerType){let _="mousemove";"pointerdown"===e?_="mousedown":"pointerup"==e&&(_="pointerup"),this.g_bmb(_,g,u),this.g_blY=g.buttons}}g_bme(e,g){"pointerdown"===e&&window!==window.top&&window.focus();for(let _=0,n=g.changedTouches.length;_<n;++_){const n=g.changedTouches[_];this.g_bkb(e,{pointerId:n.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:n.clientX,clientY:n.clientY,width:2*(n.radiusX||n.webkitRadiusX||0),height:2*(n.radiusY||n.webkitRadiusY||0),pressure:n.force||n.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:n.rotationAngle||0,timeStamp:g.timeStamp},i)}}g_blV(){this.g_blK||(this.g_blK=!0,window.addEventListener("deviceorientation",e=>this.g_baP(e)))}g_blW(){this.g_blL||(this.g_blL=!0,window.addEventListener("devicemotion",e=>this.g_baQ(e)))}g_baP(e){this.g_bjZ("deviceorientation",{alpha:e.alpha||0,beta:e.beta||0,gamma:e.gamma||0,timeStamp:e.timeStamp},i)}g_baQ(_){let n=null;const t=_.acceleration;t&&(n={x:t.x||0,y:t.y||0,z:t.z||0});let a=null;const o=_.accelerationIncludingGravity;o&&(a={x:o.x||0,y:o.y||0,z:o.z||0});let e=null;const p=_.rotationRate;p&&(e={alpha:p.alpha||0,beta:p.beta||0,gamma:p.gamma||0}),this.g_bjZ("devicemotion",{acceleration:n,accelerationIncludingGravity:a,rotationRate:e,interval:_.interval,timeStamp:_.timeStamp},i)}g_blN(e){const g=this.g_bkh(),_=g.g_bkV();_.style.width=e.styleWidth+"px",_.style.height=e.styleHeight+"px",_.style.marginLeft=e.marginLeft+"px",_.style.marginTop=e.marginTop+"px",g.g_blb(),this.g_blH&&(_.style.display="",this.g_blH=!1)}g_blO(g){const _=g.url,n=g.filename,b=document.createElement("a"),e=document.body;b.textContent=n,b.href=_,b.download=n,e.appendChild(b),b.click(),e.removeChild(b)}async g_blP(_){const n=_.blob,b=_.width,t=_.height,e=await p(n),a=await self.C3_RasterSvgImage(e,b,t);return await createImageBitmap(a)}async g_blX(e){await t(e.url)}g_blC(){const e=[...this.g_blZ];if(this.g_blZ.clear(),!this.g_bev)for(const g of e){const e=g.play();e&&e.catch(()=>{this.g_bl_.has(g)||this.g_blZ.add(g)})}}g_blA(e){if("function"!=typeof e.play)throw new Error("missing play function");this.g_bl_.delete(e);let g;try{g=e.play()}catch(g){return void this.g_blZ.add(e)}g&&g.catch(()=>{this.g_bl_.has(e)||this.g_blZ.add(e)})}g_blB(e){this.g_blZ.delete(e),this.g_bl_.add(e)}g_DU(e){this.g_bev=!!e}g_blU(e){const g=e.show;if(!g)return void(this.g_blM&&(this.g_blM.style.display="none"));this.g_blM||(this.g_blM=document.createElement("div"),this.g_blM.id="inspectOutline",document.body.appendChild(this.g_blM));const _=this.g_blM;_.style.display="",_.style.left=e.left-1+"px",_.style.top=e.top-1+"px",_.style.width=e.width+2+"px",_.style.height=e.height+2+"px",_.textContent=e.name}g_blR(){window.C3_RegisterSW&&window.C3_RegisterSW()}g_blS(e){window.c3_postToMessagePort&&(e.from="runtime",window.c3_postToMessagePort(e))}g_aCF(e,g){return this.g_bj$("js-invoke-function",{name:e,params:g})}};g_bkC.g_blx(n)}{const e=document.currentScript.src;self.g_bla=class{constructor(g){this.g_bml=g,this.g_aWp=e?e.substr(0,e.lastIndexOf("/")+1):g.g_Sh(),this.g_a_j=Math.min(navigator.hardwareConcurrency||2,16),this.g_bmm=null,this.g_bmn=[],this.g_a_h=null,this.g_bmo=null}async g_aRG(){if(this.g_bmp)throw new Error("already initialised");this.g_bmp=!0;const e=this.g_bml.g_blf("dispatchworker.js");this.g_bmm=await this.g_bml.g_blg(e,this.g_aWp,{name:"DispatchWorker"});const g=new MessageChannel;this.g_a_h=g.port1,this.g_bmm.postMessage({type:"_init","in-port":g.port2},[g.port2]),this.g_bmo=await this.g_bls()}async g_bls(){const g=this.g_bmn.length,_=this.g_bml.g_blf("jobworker.js"),n=await this.g_bml.g_blg(_,this.g_aWp,{name:"JobWorker"+g}),b=new MessageChannel,t=new MessageChannel;return this.g_bmm.postMessage({type:"_addJobWorker",port:b.port1},[b.port1]),n.postMessage({type:"init",number:g,"dispatch-port":b.port2,"output-port":t.port2},[b.port2,t.port2]),this.g_bmn.push(n),t.port1}g_blk(){return{inputPort:this.g_a_h,outputPort:this.g_bmo,maxNumWorkers:this.g_a_j}}g_blo(){return[this.g_a_h,this.g_bmo]}}}if("use strict",window.C3_IsSupported){const e="undefined"!=typeof OffscreenCanvas;window.c3_runtimeInterface=new g_bkC({g_bkE:e,g_bll:"workermain.js",g_bkY:["scripts/c3runtime.js"],g_bkH:"scripts/",g_blm:[],g_fE:"html5"})}{const e=class extends g_bjV{constructor(e){super(e,"touch"),this.g_bke("request-permission",e=>this.g_bmq(e))}async g_bmq(e){const g=e.type;let _=!0;0===g?_=await this.g_bmr():1===g&&(_=await this.g_bms()),this.g_bjZ("permission-result",{type:g,result:_})}async g_bmr(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;try{const e=await self.DeviceOrientationEvent.requestPermission();return"granted"===e}catch(e){return console.warn("[Touch] Failed to request orientation permission: ",e),!1}}async g_bms(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{const e=await self.DeviceMotionEvent.requestPermission();return"granted"===e}catch(e){return console.warn("[Touch] Failed to request motion permission: ",e),!1}}};g_bkC.g_blx(e)}{function g(e){e.stopPropagation()}function _(e){13!==e.which&&27!==e.which&&e.stopPropagation()}const e=class extends g_bkl{constructor(e){super(e,"text-input"),this.g_bkv("scroll-to-bottom",e=>this.g_bmt(e))}g_aMx(n,b){let t;const a=b.type;return"textarea"===a?(t=document.createElement("textarea"),t.style.resize="none"):(t=document.createElement("input"),t.type=a),t.style.position="absolute",t.autocomplete="off",t.addEventListener("touchstart",g),t.addEventListener("touchmove",g),t.addEventListener("touchend",g),t.addEventListener("mousedown",g),t.addEventListener("mouseup",g),t.addEventListener("keydown",_),t.addEventListener("keyup",_),t.addEventListener("click",e=>{e.stopPropagation(),this.g_bky("click",n)}),t.addEventListener("dblclick",e=>{e.stopPropagation(),this.g_bky("dblclick",n)}),t.addEventListener("input",()=>this.g_bkx("change",n,{text:t.value})),t.id=b.id,this.g_bkz(t,b),t}g_bkz(e,g){e.value=g.text,e.placeholder=g.placeholder,e.title=g.title,e.disabled=!g.isEnabled,e.readOnly=g.isReadOnly,e.spellcheck=g.spellCheck}g_bmt(e){e.scrollTop=e.scrollHeight}};g_bkC.g_blx(e)}{function e(e,g){return e.length===g.length&&(e===g||e.toLowerCase()===g.toLowerCase())}const g=class extends g_bjV{constructor(e){super(e,"audio"),this.g_bmu=null,this.g_bmv=null,this.g_bmw=!1,this.g_bmx=()=>this.g_bmy(),this.g_bmz=[],this.g_bmA=[],this.g_bmB=null,this.g_bmC="",this.g_bmD=-1,this.g_bmE=new Map,this.g_beu=1,this.g_bev=!1,this.g_beh=0,this.g_aRC=1,this.g_aXG=0,this.g_bek="HRTF",this.g_bel="inverse",this.g_bmF=600,this.g_beq=1e4,this.g_ber=1,this.g_bmG=!1,this.g_bmH=!1,this.g_bmI=this.g_aYl.g_akX("audio/webm; codecs=opus"),this.g_bmJ=new Map,this.g_bmK=new Set,this.g_bmL=!1,this.g_bmM="",this.g_bmN=null,self.C3Audio_OnMicrophoneStream=(e,g)=>this.g_bmO(e,g),this.g_bmP=null,self.C3Audio_GetOutputStream=()=>this.g_bmQ(),this.g_bkg([["create-audio-context",e=>this.g_bmR(e)],["play",e=>this.g_bmS(e)],["stop",e=>this.g_biz(e)],["stop-all",()=>this.g_bmT()],["set-paused",e=>this.g_bmU(e)],["set-volume",e=>this.g_bmV(e)],["fade-volume",e=>this.g_bmW(e)],["set-master-volume",e=>this.g_bmX(e)],["set-muted",e=>this.g_bmY(e)],["set-silent",e=>this.g_bmZ(e)],["set-looping",e=>this.g_bm_(e)],["set-playback-rate",e=>this.g_bm$(e)],["seek",e=>this.g_bna(e)],["preload",e=>this.g_bnb(e)],["unload",e=>this.g_apV(e)],["unload-all",()=>this.g_bnc()],["set-suspended",e=>this.g_bnd(e)],["add-effect",e=>this.g_bne(e)],["set-effect-param",e=>this.g_bnf(e)],["remove-effects",e=>this.g_bng(e)],["tick",e=>this.g_asb(e)],["load-state",e=>this.g_bnh(e)]])}async g_bmR(e){e.isWKWebView&&(this.g_bmG=!0),this.g_beh=e.timeScaleMode,this.g_bek=["equalpower","HRTF","soundfield"][e.panningModel],this.g_bel=["linear","inverse","exponential"][e.distanceModel],this.g_bmF=e.refDistance,this.g_beq=e.maxDistance,this.g_ber=e.rolloffFactor;const g={latencyHint:e.latencyHint};if("undefined"!=typeof AudioContext)this.g_bmu=new AudioContext(g);else if("undefined"!=typeof webkitAudioContext)this.g_bmu=new webkitAudioContext(g);else throw new Error("Web Audio API not supported");this.g_bmv=this.g_bmu.createGain(),this.g_bmv.connect(this.g_bmu.destination);const _=e.listenerPos;this.g_bmu.listener.setPosition(_[0],_[1],_[2]),this.g_bmu.listener.setOrientation(0,0,1,0,-1,0),window.addEventListener("pointerup",this.g_bmx,!0),window.addEventListener("touchend",this.g_bmx,!0),window.addEventListener("click",this.g_bmx,!0),window.addEventListener("keydown",this.g_bmx,!0),self.C3_GetAudioContextCurrentTime=()=>this.g_bni();try{await Promise.all(e.preloadList.map(e=>this.g_bnj(e.originalUrl,e.url,e.type,!1)))}catch(e){console.error("[Construct 3] Preloading sounds failed: ",e)}return{sampleRate:this.g_bmu.sampleRate}}g_bmy(){if(!this.g_bmw){const e=this.g_bmu;"suspended"===e.state&&e.resume&&e.resume();const g=e.createBuffer(1,220,22050),_=e.createBufferSource();_.buffer=g,_.connect(e.destination),_.start(0),"running"===e.state&&(this.g_bmw=!0,window.removeEventListener("pointerup",this.g_bmx,!0),window.removeEventListener("touchend",this.g_bmx,!0),window.removeEventListener("click",this.g_bmx,!0),window.removeEventListener("keydown",this.g_bmx,!0),this.g_bmx=null)}}g_bnk(){return this.g_bmu}g_bni(){return this.g_bmu.currentTime}g_bnl(){return this.g_bmv}g_bnm(e){const g=this.g_bmJ.get(e.toLowerCase());return g?g[0].g_bnn():this.g_bnl()}g_bno(e,g){e=e.toLowerCase();let _=this.g_bmJ.get(e);_||(_=[],this.g_bmJ.set(e,_)),g.g_aTg(_.length),g.g_bnp(e),_.push(g),this.g_bnq(e)}g_bnq(e){let g=this.g_bnl();const _=this.g_bmJ.get(e);if(_&&_.length){g=_[0].g_bnn();for(let e=0,g=_.length;e<g;++e){const n=_[e];e+1===g?n.g_bnr(this.g_bnl()):n.g_bnr(_[e+1].g_bnn())}}for(const _ of this.g_bns(e))_.g_bnt(g);this.g_bmN&&this.g_bmM===e&&(this.g_bmN.disconnect(),this.g_bmN.connect(g))}g_bnu(){return this.g_beu}g_DB(){return this.g_bev}g_bnv(){return this.g_beh}g_asU(){return this.g_aRC}g_aoI(){return this.g_aXG}g_bnw(){return this.g_bmG}g_bnx(){return this.g_bmI}g_bny(){this.g_bmH=!0}g_bnz(){return this.g_bek}g_bnA(){return this.g_bel}g_bnB(){return this.g_bmF}g_bnC(){return this.g_beq}g_bnD(){return this.g_ber}g_bnE(e,g){return g?this.g_aYl.g_aNN(e).then(e=>{const g=this.g_bmu.createBuffer(1,e.length,48e3),_=g.getChannelData(0);return _.set(e),g}):new Promise((g,_)=>{this.g_bmu.decodeAudioData(e,g,_)})}g_blA(e){this.g_aYl.g_blA(e)}g_blB(e){this.g_aYl.g_blB(e)}g_bnF(g){let _=0;for(let n=0,e=this.g_bmA.length;n<e;++n){const b=this.g_bmA[n];this.g_bmA[_]=b,b.g_bnG()===g?b.g_RE():++_}this.g_bmA.length=_}g_bnH(){let e=0;for(let g=0,_=this.g_bmz.length;g<_;++g){const _=this.g_bmz[g];this.g_bmz[e]=_,_.g_bnI()?_.g_RE():++e}this.g_bmz.length=e}*g_bns(g){if(g)for(const _ of this.g_bmA)e(_.g_bnJ(),g)&&(yield _);else this.g_bmB&&!this.g_bmB.g_bnK()&&(yield this.g_bmB)}async g_bnj(g,_,n,b,t){for(const e of this.g_bmz)if(e.g_bnL()===_)return await e.g_KW(),e;if(t)return null;b&&(this.g_bmG||this.g_bmH)&&this.g_bnH();const e=g_bnM.g_aad(this,g,_,n,b);return this.g_bmz.push(e),await e.g_KW(),e}async g_bnN(_,n,b,t,a){for(const e of this.g_bmA)if(e.g_bnL()===n&&(e.g_bnO()||a))return e.g_bnP(t),e;const e=await this.g_bnj(_,n,b,a),o=e.g_aN$(t);return this.g_bmA.push(o),o}g_bnQ(e){let g=this.g_bmE.get(e);if(!g){let _=null;const n=new Promise(e=>_=e);g={g_bnR:0,promise:n,resolve:_},this.g_bmE.set(e,g)}g.g_bnR++}g_bnS(e){const g=this.g_bmE.get(e);if(!g)throw new Error("expected pending tag");g.g_bnR--,0===g.g_bnR&&(g.resolve(),this.g_bmE.delete(e))}g_bnT(e){e||(e=this.g_bmC);const g=this.g_bmE.get(e);return g?g.promise:Promise.resolve()}g_bnU(){if(0<this.g_bmK.size)return void this.g_aL_();for(const e of this.g_bmA)if(e.g_Le())return void this.g_aL_()}g_asW(){for(const e of this.g_bmK)e.g_asW();const e=this.g_bni();for(const g of this.g_bmA)g.g_asW(e);const g=this.g_bmA.filter(e=>e.g_Le()).map(e=>e.g_bnV());this.g_bjZ("state",{tickCount:this.g_bmD,audioInstances:g,analysers:[...this.g_bmK].map(e=>e.g_bnW())}),0===g.length&&0===this.g_bmK.size&&this.g_aLL()}g_bnX(e,g){this.g_bjZ("trigger",{type:e,tag:g})}async g_bmS(_){const n=_.originalUrl,b=_.url,t=_.type,a=_.isMusic,e=_.tag,o=_.isLooping,g=_.vol,p=_.pos,i=_.panning;let r=_.off;if(0<r&&!_.trueClock)if(this.g_bmu.getOutputTimestamp){const e=this.g_bmu.getOutputTimestamp();r=r-e.performanceTime/1e3+e.contextTime}else r=r-performance.now()/1e3+this.g_bmu.currentTime;this.g_bmC=e,this.g_bnQ(e);try{this.g_bmB=await this.g_bnN(n,b,t,e,a),i?(this.g_bmB.g_bnY(!0),this.g_bmB.g_bnZ(i.x,i.y,i.angle,i.innerAngle,i.outerAngle,i.outerGain),i.hasOwnProperty("uid")&&this.g_bmB.g_bn_(i.uid)):this.g_bmB.g_bnY(!1),this.g_bmB.g_DE(o,g,p,r)}catch(e){return void console.error("[Construct 3] Audio: error starting playback: ",e)}finally{this.g_bnS(e)}this.g_aL_()}g_biz(e){const g=e.tag;for(const _ of this.g_bns(g))_.g_DQ()}g_bmT(){for(const e of this.g_bmA)e.g_DQ()}g_bmU(e){const g=e.tag,_=e.paused;for(const n of this.g_bns(g))_?n.g_MN():n.g_auB();this.g_bnU()}g_bmV(e){const g=e.tag,_=e.vol;for(const n of this.g_bns(g))n.g_DM(_)}async g_bmW(g){const _=g.tag,n=g.vol,b=g.duration,t=g.stopOnEnd;await this.g_bnT(_);for(const e of this.g_bns(_))e.g_beW(n,b,t);this.g_bnU()}g_bmX(e){this.g_beu=e.vol;for(const g of this.g_bmA)g.g_bn$()}g_bmY(e){const g=e.tag,_=e.isMuted;for(const n of this.g_bns(g))n.g_DL(_)}g_bmZ(e){this.g_bev=e.isSilent,this.g_aYl.g_DU(this.g_bev);for(const g of this.g_bmA)g.g_boa()}g_bm_(e){const g=e.tag,_=e.isLooping;for(const n of this.g_bns(g))n.g_DK(_)}g_bm$(e){const g=e.tag,_=e.rate;for(const n of this.g_bns(g))n.g_DP(_)}g_bna(e){const g=e.tag,_=e.pos;for(const n of this.g_bns(g))n.g_DT(_)}async g_bnb(g){const _=g.originalUrl,n=g.url,b=g.type,t=g.isMusic;try{await this.g_bnN(_,n,b,"",t)}catch(e){console.error("[Construct 3] Audio: error preloading: ",e)}}async g_apV(g){const _=g.url,n=g.type,b=g.isMusic,t=await this.g_bnj("",_,n,b,!0);if(t){t.g_RE();const e=this.g_bmz.indexOf(t);-1!==e&&this.g_bmz.splice(e,1)}}g_bnc(){for(const e of this.g_bmz)e.g_RE();this.g_bmz.length=0}g_bnd(e){const g=e.isSuspended;!g&&this.g_bmu.resume&&this.g_bmu.resume();for(const _ of this.g_bmA)_.g_aYY(g);g&&this.g_bmu.suspend&&this.g_bmu.suspend()}g_asb(e){if(this.g_aRC=e.timeScale,this.g_aXG=e.gameTime,this.g_bmD=e.tickCount,0!==this.g_beh)for(const e of this.g_bmA)e.g_bob();const g=e.listenerPos;g&&this.g_bmu.listener.setPosition(g[0],g[1],g[2]);for(const g of e.instPans){const e=g.uid;for(const _ of this.g_bmA)_.g_amM()===e&&_.g_boc(g.x,g.y,g.angle)}}async g_bne(g){const _=g.type,n=g.tag,t=g.params;let a;if("filter"===_)a=new g_bod(this,...t);else if("delay"===_)a=new g_boe(this,...t);else if("convolution"===_){let e=null;try{e=await this.g_bnj(g.bufferOriginalUrl,g.bufferUrl,g.bufferType,!1)}catch(e){return void console.log("[Construct 3] Audio: error loading convolution: ",e)}a=new g_bof(this,e.g_bog(),...t),a.g_boh(g.bufferOriginalUrl,g.bufferUrl,g.bufferType)}else if("flanger"===_)a=new g_boi(this,...t);else if("phaser"===_)a=new g_boj(this,...t);else if("gain"===_)a=new g_bok(this,...t);else if("tremolo"===_)a=new g_bol(this,...t);else if("ringmod"===_)a=new g_bom(this,...t);else if("distortion"===_)a=new g_bon(this,...t);else if("compressor"===_)a=new g_boo(this,...t);else if("analyser"===_)a=new g_bop(this,...t);else throw new Error("invalid effect type");this.g_bno(n,a),this.g_boq()}g_bnf(_){const n=_.tag,b=_.index,t=_.param,a=_.value,e=_.ramp,o=_.time,g=this.g_bmJ.get(n);!g||0>b||b>=g.length||(g[b].g_bor(t,a,e,o),this.g_boq())}g_bng(e){const g=e.tag.toLowerCase(),_=this.g_bmJ.get(g);if(_&&_.length){for(const e of _)e.g_RE();this.g_bmJ.delete(g),this.g_bnq(g)}}g_bos(e){this.g_bmK.add(e),this.g_bnU()}g_bot(e){this.g_bmK.delete(e)}g_boq(){this.g_bmL||(this.g_bmL=!0,Promise.resolve().then(()=>this.g_bou()))}g_bou(){const e={};for(const[g,_]of this.g_bmJ)e[g]=_.map(e=>e.g_bnV());this.g_bjZ("fxstate",{fxstate:e}),this.g_bmL=!1}async g_bnh(e){const g=e.saveLoadMode;if(3!==g)for(const e of this.g_bmA)e.g_bnI()&&1===g||!e.g_bnI()&&2===g||e.g_DQ();for(const g of this.g_bmJ.values())for(const e of g)e.g_RE();this.g_bmJ.clear(),this.g_aRC=e.timeScale,this.g_aXG=e.gameTime;const _=e.listenerPos;this.g_bmu.listener.setPosition(_[0],_[1],_[2]),this.g_bev=e.isSilent,this.g_aYl.g_DU(this.g_bev),this.g_beu=e.masterVolume;const n=[];for(const g of Object.values(e.effects))n.push(Promise.all(g.map(e=>this.g_bne(e))));await Promise.all(n),await Promise.all(e.playing.map(e=>this.g_bov(e,g))),this.g_bnU()}async g_bov(_,n){if(3===n)return;const b=_.bufferOriginalUrl,t=_.bufferUrl,a=_.bufferType,e=_.isMusic,o=_.tag,g=_.isLooping,p=_.volume,i=_.playbackTime;if(e&&1===n)return;if(!e&&2===n)return;let r=null;try{r=await this.g_bnN(b,t,a,o,e)}catch(e){return void console.error("[Construct 3] Audio: error loading audio state: ",e)}r.g_bow(_.pan),r.g_DE(g,p,i,0),_.isPlaying||r.g_MN(),r.g_box(_)}g_bmO(e,g){this.g_bmN&&this.g_bmN.disconnect(),this.g_bmM=g.toLowerCase(),this.g_bmN=this.g_bmu.createMediaStreamSource(e),this.g_bmN.connect(this.g_bnm(this.g_bmM))}g_bmQ(){return this.g_bmP||(this.g_bmP=this.g_bmu.createMediaStreamDestination(),this.g_bmv.connect(this.g_bmP)),this.g_bmP.stream}};g_bkC.g_blx(g)}"use strict",self.g_bnM=class{constructor(g,_,n,b,t){this.g_boy=g,this.g_boz=_,this.g_all=n,this.g_W_=b,this.g_boA=t,this.g_boB="",this.g_boC="not-loaded",this.g_alq=null}g_RE(){this.g_boC="not-loaded",this.g_boy=null,this.g_alq=null}static g_aad(g,_,n,b,t){const e="audio/webm; codecs=opus"===b&&!g.g_bnx();return t&&e&&g.g_bny(),!t||g.g_bnw()||e?new g_boD(g,_,n,b,t,e):new g_boE(g,_,n,b,t)}g_aN$(e){return"html5"===this.g_boB?new g_boF(this.g_boy,this,e):new g_boG(this.g_boy,this,e)}g_apP(){}g_KW(){return this.g_alq||(this.g_alq=this.g_apP()),this.g_alq}g_alr(){}g_boH(){}g_boI(){return"failed"===this.g_boC}g_bnk(){return this.g_boy.g_bnk()}g_boJ(){return this.g_boB}g_boK(){return this.g_boz}g_bnL(){return this.g_all}g_boL(){return this.g_W_}g_bnI(){return this.g_boA}g_aPD(){}},"use strict",self.g_boE=class extends g_bnM{constructor(g,_,n,b,t){super(g,_,n,b,t),this.g_boB="html5",this.g_boM=new Audio,this.g_boM.crossOrigin="anonymous",this.g_boM.autoplay=!1,this.g_boM.preload="auto",this.g_boN=null,this.g_boO=null,this.g_boP=!1,this.g_boM.addEventListener("canplaythrough",()=>this.g_boP=!0),this.g_boQ=this.g_bnk().createGain(),this.g_boR=null,this.g_boM.addEventListener("canplay",()=>{this.g_boN&&(this.g_boC="loaded",this.g_boN(),this.g_boN=null,this.g_boO=null),this.g_boR||!this.g_boM||(this.g_boR=this.g_bnk().createMediaElementSource(this.g_boM),this.g_boR.connect(this.g_boQ))}),this.onended=null,this.g_boM.addEventListener("ended",()=>{this.onended&&this.onended()}),this.g_boM.addEventListener("error",e=>this.g_bbu(e))}g_RE(){this.g_boy.g_bnF(this),this.g_boQ.disconnect(),this.g_boQ=null,this.g_boR.disconnect(),this.g_boR=null,this.g_boM&&!this.g_boM.paused&&this.g_boM.pause(),this.onended=null,this.g_boM=null,super.g_RE()}g_apP(){return this.g_boC="loading",new Promise((e,g)=>{this.g_boN=e,this.g_boO=g,this.g_boM.src=this.g_all})}g_bbu(e){console.error(`[Construct 3] Audio '${this.g_all}' error: `,e),this.g_boO&&(this.g_boC="failed",this.g_boO(e),this.g_boN=null,this.g_boO=null)}g_alr(){const e=4<=this.g_boM.readyState;return e&&(this.g_boP=!0),e||this.g_boP}g_boH(){return this.g_alr()}g_boS(){return this.g_boM}g_boT(){return this.g_boQ}g_aPD(){return this.g_boM.duration}},"use strict",self.g_boD=class extends g_bnM{constructor(g,_,n,b,t,e){super(g,_,n,b,t),this.g_boB="webaudio",this.g_boU=null,this.g_boV=null,this.g_boW=!!e}g_RE(){this.g_boy.g_bnF(this),this.g_boU=null,this.g_boV=null,super.g_RE()}async g_boX(){if(this.g_boU)return this.g_boU;const e=this.g_boy.g_bkh();if("cordova"===e.g_aZI()&&e.g_SN(this.g_all))this.g_boU=await e.g_akC(this.g_all);else{const e=await fetch(this.g_all);if(!e.ok)throw new Error(`error fetching audio data: ${e.status} ${e.statusText}`);this.g_boU=await e.arrayBuffer()}}async g_boY(){return this.g_boV?this.g_boV:void(this.g_boV=await this.g_boy.g_bnE(this.g_boU,this.g_boW),this.g_boU=null)}async g_apP(){try{this.g_boC="loading",await this.g_boX(),await this.g_boY(),this.g_boC="loaded"}catch(e){this.g_boC="failed",console.error(`[Construct 3] Failed to load audio '${this.g_all}': `,e)}}g_alr(){return!!(this.g_boU||this.g_boV)}g_boH(){return!!this.g_boV}g_bog(){return this.g_boV}g_aPD(){return this.g_boV?this.g_boV.duration:0}},"use strict";{function _(g){return g*e}const e=180/Math.PI;self.g_boZ=class{constructor(e,g,_){this.g_boy=e,this.g_afy=g,this.g_bo_=_,this.g_bo$=this.g_bnk().createGain(),this.g_bo$.connect(this.g_bnl()),this.g_bpa=null,this.g_bpb=!1,this.g_aCa=!0,this.g_bpc=!1,this.g_bpd=!1,this.g_aJa=!1,this.g_bpe=1,this.g_bpf=!1,this.g_ath=1;const n=this.g_boy.g_bnv();this.g_bpg=1===n&&!this.g_bnI()||2===n,this.g_bph=-1,this.g_bpi=-1,this.g_bpj=!1}g_RE(){this.g_boy=null,this.g_afy=null,this.g_bpa&&(this.g_bpa.disconnect(),this.g_bpa=null),this.g_bo$.disconnect(),this.g_bo$=null}g_bnk(){return this.g_boy.g_bnk()}g_bnl(){return this.g_boy.g_bnm(this.g_bo_)}g_bnu(){return this.g_boy.g_bnu()}g_bpk(){return this.g_bpg?this.g_boy.g_aoI():performance.now()/1e3}g_boK(){return this.g_afy.g_boK()}g_bnL(){return this.g_afy.g_bnL()}g_boL(){return this.g_afy.g_boL()}g_bnG(){return this.g_afy}g_bnI(){return this.g_afy.g_bnI()}g_bnP(e){this.g_bo_=e}g_bnJ(){return this.g_bo_}g_bnK(){}g_bnO(){}g_atT(){return!this.g_aCa&&!this.g_bpc&&!this.g_bnK()}g_Le(){return!this.g_aCa&&!this.g_bnK()}g_bpl(){}g_aPD(e){let g=this.g_afy.g_aPD();return e&&(g/=this.g_ath||.001),g}g_DE(){}g_DQ(){}g_MN(){}g_bpm(){return this.g_bpc}g_auB(){}g_DM(e){this.g_bpe=e,this.g_bo$.gain.cancelScheduledValues(0),this.g_bpi=-1,this.g_bo$.gain.value=this.g_bpn()}g_beW(g,_,n){if(!this.g_bpo()){g*=this.g_bnu();const b=this.g_bo$.gain;b.cancelScheduledValues(0);const t=this.g_boy.g_bni(),e=t+_;b.setValueAtTime(this.g_bpn(),t),b.linearRampToValueAtTime(g,e),this.g_bpe=g,this.g_bpi=e,this.g_bpj=n}}g_bn$(){this.g_DM(this.g_bpe)}g_asW(e){-1!==this.g_bpi&&e>=this.g_bpi&&(this.g_bpi=-1,this.g_bpj&&this.g_DQ(),this.g_boy.g_bnX("fade-ended",this.g_bo_))}g_bpn(){const e=this.g_bpe*this.g_bnu();return isFinite(e)?e:0}g_DL(e){e=!!e,this.g_bpf===e||(this.g_bpf=e,this.g_boa())}g_bpo(){return this.g_bpf}g_DB(){return this.g_boy.g_DB()}g_boa(){}g_DK(){}g_aGT(){return this.g_aJa}g_DP(e){this.g_ath===e||(this.g_ath=e,this.g_bob())}g_bob(){}g_atR(){return this.g_ath}g_DT(){}g_aYY(){}g_bnY(e){e=!!e,this.g_bpb===e||(this.g_bpb=e,this.g_bpb?(!this.g_bpa&&(this.g_bpa=this.g_bnk().createPanner(),this.g_bpa.panningModel=this.g_boy.g_bnz(),this.g_bpa.distanceModel=this.g_boy.g_bnA(),this.g_bpa.refDistance=this.g_boy.g_bnB(),this.g_bpa.maxDistance=this.g_boy.g_bnC(),this.g_bpa.rolloffFactor=this.g_boy.g_bnD()),this.g_bo$.disconnect(),this.g_bo$.connect(this.g_bpa),this.g_bpa.connect(this.g_bnl())):(this.g_bpa.disconnect(),this.g_bo$.disconnect(),this.g_bo$.connect(this.g_bnl())))}g_bnZ(n,b,t,a,e,o){this.g_bpb&&(this.g_boc(n,b,t),this.g_bpa.coneInnerAngle=_(a),this.g_bpa.coneOuterAngle=_(e),this.g_bpa.coneOuterGain=o)}g_boc(e,g,_){this.g_bpb&&(this.g_bpa.setPosition(e,g,0),this.g_bpa.setOrientation(Math.cos(_),Math.sin(_),0))}g_bn_(e){this.g_bph=e}g_amM(){return this.g_bph}g_bpp(){}g_bnt(e){const g=this.g_bpa||this.g_bo$;g.disconnect(),g.connect(e)}g_bnV(){return{tag:this.g_bo_,duration:this.g_aPD(),volume:this.g_bpe,isPlaying:this.g_atT(),playbackTime:this.g_bpl(),playbackRate:this.g_atR(),uid:this.g_bph,bufferOriginalUrl:this.g_boK(),bufferUrl:"",bufferType:this.g_boL(),isMusic:this.g_bnI(),isLooping:this.g_aGT(),isMuted:this.g_bpo(),resumePosition:this.g_bpp(),pan:this.g_bpq()}}g_box(e){this.g_DP(e.playbackRate),this.g_DL(e.isMuted)}g_bpq(){if(!this.g_bpa)return null;const e=this.g_bpa;return{pos:[e.positionX.value,e.positionY.value,e.positionZ.value],orient:[e.orientationX.value,e.orientationY.value,e.orientationZ.value],cia:e.coneInnerAngle,coa:e.coneOuterAngle,cog:e.coneOuterGain,uid:this.g_bph}}g_bow(e){if(!e)return void this.g_bnY(!1);this.g_bnY(!0);const g=this.g_bpa;g.setPosition(...g.pos),g.setOrientation(...g.orient),g.coneInnerAngle=g.cia,g.coneOuterAngle=g.coa,g.coneOuterGain=g.cog,this.g_bph=g.uid}}}"use strict",self.g_boF=class extends g_boZ{constructor(e,g,_){super(e,g,_),this.g_afy.g_boT().connect(this.g_bo$),this.g_afy.onended=()=>this.g_bpr()}g_RE(){this.g_DQ(),this.g_afy.g_boT().disconnect(),super.g_RE()}g_boS(){return this.g_afy.g_boS()}g_bpr(){this.g_aCa=!0,this.g_bph=-1,this.g_boy.g_bnX("ended",this.g_bo_)}g_bnK(){return this.g_boS().ended}g_bnO(){return!!this.g_aCa||this.g_bnK()}g_bpl(e){let g=this.g_boS().currentTime;return e&&(g*=this.g_ath),this.g_aJa||(g=Math.min(g,this.g_aPD())),g}g_DE(e,g,_){const n=this.g_boS();if(1!==n.playbackRate&&(n.playbackRate=1),n.loop!==e&&(n.loop=e),this.g_DM(g),n.muted&&(n.muted=!1),n.currentTime!==_)try{n.currentTime=_}catch(e){console.warn(`[Construct 3] Exception seeking audio '${this.g_afy.g_bnL()}' to position '${_}': `,e)}this.g_boy.g_blA(n),this.g_aCa=!1,this.g_bpc=!1,this.g_aJa=e,this.g_ath=1}g_DQ(){const e=this.g_boS();e.paused||e.pause(),this.g_boy.g_blB(e),this.g_aCa=!0,this.g_bpc=!1,this.g_bph=-1}g_MN(){if(!(this.g_bpc||this.g_aCa||this.g_bnK())){const e=this.g_boS();e.paused||e.pause(),this.g_boy.g_blB(e),this.g_bpc=!0}}g_auB(){!this.g_bpc||this.g_aCa||this.g_bnK()||(this.g_boy.g_blA(this.g_boS()),this.g_bpc=!1)}g_boa(){this.g_boS().muted=this.g_bpf||this.g_DB()}g_DK(e){e=!!e,this.g_aJa===e||(this.g_aJa=e,this.g_boS().loop=e)}g_bob(){let e=this.g_ath;this.g_bpg&&(e*=this.g_boy.g_asU());try{this.g_boS().playbackRate=e}catch(g){console.warn(`[Construct 3] Unable to set playback rate '${e}':`,g)}}g_DT(e){if(!(this.g_aCa||this.g_bnK()))try{this.g_boS().currentTime=e}catch(g){console.warn(`[Construct 3] Error seeking audio to '${e}': `,g)}}g_bpp(){return this.g_bpl()}g_aYY(e){e?this.g_atT()?(this.g_boS().pause(),this.g_bpd=!0):this.g_bpd=!1:this.g_bpd&&(this.g_boy.g_blA(this.g_boS()),this.g_bpd=!1)}},"use strict",self.g_boG=class extends g_boZ{constructor(e,g,_){super(e,g,_),this.g_bps=null,this.g_bpt=e=>this.g_bpr(e),this.g_bpu=!0,this.g_bpv=null,this.g_aXB=0,this.g_bpw=0,this.g_bpx=1}g_RE(){this.g_DQ(),this.g_bpy(),this.g_bpt=null,super.g_RE()}g_bpy(){this.g_bps&&this.g_bps.disconnect(),this.g_bps=null,this.g_bpv=null}g_bpr(e){this.g_bpc||this.g_bpd||e.target!==this.g_bpv||(this.g_bpu=!0,this.g_aCa=!0,this.g_bph=-1,this.g_bpy(),this.g_boy.g_bnX("ended",this.g_bo_))}g_bnK(){return!(!this.g_aCa&&this.g_bps&&this.g_bps.loop)&&!this.g_bpc&&this.g_bpu}g_bnO(){return!this.g_bps||this.g_aCa||this.g_bnK()}g_bpl(e){let g=0;return g=this.g_bpc?this.g_bpw:this.g_bpk()-this.g_aXB,e&&(g*=this.g_ath),this.g_aJa||(g=Math.min(g,this.g_aPD())),g}g_DE(e,g,_,n){this.g_bpx=1,this.g_DM(g),this.g_bpy(),this.g_bps=this.g_bnk().createBufferSource(),this.g_bps.buffer=this.g_afy.g_bog(),this.g_bps.connect(this.g_bo$),this.g_bpv=this.g_bps,this.g_bps.onended=this.g_bpt,this.g_bps.loop=e,this.g_bps.start(n,_),this.g_bpu=!1,this.g_aCa=!1,this.g_bpc=!1,this.g_aJa=e,this.g_ath=1,this.g_aXB=this.g_bpk()-_}g_DQ(){this.g_bps&&this.g_bps.stop(0),this.g_aCa=!0,this.g_bpc=!1,this.g_bph=-1}g_MN(){this.g_bpc||this.g_aCa||this.g_bnK()||(this.g_bpw=this.g_bpl(!0),this.g_aJa&&(this.g_bpw%=this.g_aPD()),this.g_bpc=!0,this.g_bps.stop(0))}g_auB(){!this.g_bpc||this.g_aCa||this.g_bnK()||(this.g_bpy(),this.g_bps=this.g_bnk().createBufferSource(),this.g_bps.buffer=this.g_afy.g_bog(),this.g_bps.connect(this.g_bo$),this.g_bpv=this.g_bps,this.g_bps.onended=this.g_bpt,this.g_bps.loop=this.g_aJa,this.g_bn$(),this.g_bob(),this.g_aXB=this.g_bpk()-this.g_bpw/(this.g_ath||.001),this.g_bps.start(0,this.g_bpw),this.g_bpc=!1)}g_bpn(){return super.g_bpn()*this.g_bpx}g_boa(){this.g_bpx=this.g_bpf||this.g_DB()?0:1,this.g_bn$()}g_DK(e){e=!!e,this.g_aJa===e||(this.g_aJa=e,this.g_bps&&(this.g_bps.loop=e))}g_bob(){let e=this.g_ath;this.g_bpg&&(e*=this.g_boy.g_asU()),this.g_bps&&(this.g_bps.playbackRate.value=e)}g_DT(e){this.g_aCa||this.g_bnK()||(this.g_bpc?this.g_bpw=e:(this.g_MN(),this.g_bpw=e,this.g_auB()))}g_bpp(){return this.g_bpw}g_aYY(e){e?this.g_atT()?(this.g_bpd=!0,this.g_bpw=this.g_bpl(!0),this.g_aJa&&(this.g_bpw%=this.g_aPD()),this.g_bps.stop(0)):this.g_bpd=!1:this.g_bpd&&(this.g_bpy(),this.g_bps=this.g_bnk().createBufferSource(),this.g_bps.buffer=this.g_afy.g_bog(),this.g_bps.connect(this.g_bo$),this.g_bpv=this.g_bps,this.g_bps.onended=this.g_bpt,this.g_bps.loop=this.g_aJa,this.g_bn$(),this.g_bob(),this.g_aXB=this.g_bpk()-this.g_bpw/(this.g_ath||.001),this.g_bps.start(0,this.g_bpw),this.g_bpd=!1)}g_box(e){super.g_box(e),this.g_bpw=e.resumePosition}},"use strict";{function g(e){return Math.pow(10,e/20)}function _(e){return Math.max(Math.min(g(e),1),0)}function n(e){return 20*(Math.log(e)/2.302585092994046)}function t(e){return n(Math.max(Math.min(e,1),0))}function o(e,g){return 1-Math.exp(-g*e)}class e{constructor(e){this.g_boy=e,this.g_bmu=e.g_bnk(),this.g_alV=-1,this.g_bo_="",this.g_W_="",this.g_bpz=null}g_RE(){this.g_bmu=null}g_aTg(e){this.g_alV=e}g_anm(){return this.g_alV}g_bnp(e){this.g_bo_=e}g_bnJ(){return this.g_bo_}g_bpA(){return this.g_bmu.createGain()}g_bnn(){}g_bnr(){}g_bpB(g,_,n,b){if(g.cancelScheduledValues(0),0===b)return void(g.value=_);const t=this.g_bmu.currentTime;b+=t,0===n?g.setValueAtTime(_,b):1===n?(g.setValueAtTime(g.value,t),g.linearRampToValueAtTime(_,b)):2===n?(g.setValueAtTime(g.value,t),g.exponentialRampToValueAtTime(_,b)):void 0}g_bnV(){return{type:this.g_W_,tag:this.g_bo_,params:this.g_bpz}}}self.g_bod=class extends e{constructor(_,n,b,t,a,e,o){super(_),this.g_W_="filter",this.g_bpz=[n,b,t,a,e,o],this.g_bpC=this.g_bpA(),this.g_bpD=this.g_bpA(),this.g_bpD.gain.value=o,this.g_bpE=this.g_bpA(),this.g_bpE.gain.value=1-o,this.g_bpF=this.g_bmu.createBiquadFilter(),this.g_bpF.type=n,this.g_bpF.frequency.value=b,this.g_bpF.detune.value=t,this.g_bpF.Q.value=a,this.g_bpF.gain.vlaue=e,this.g_bpC.connect(this.g_bpF),this.g_bpC.connect(this.g_bpE),this.g_bpF.connect(this.g_bpD)}g_RE(){this.g_bpC.disconnect(),this.g_bpF.disconnect(),this.g_bpD.disconnect(),this.g_bpE.disconnect(),super.g_RE()}g_bnr(e){this.g_bpD.disconnect(),this.g_bpD.connect(e),this.g_bpE.disconnect(),this.g_bpE.connect(e)}g_bnn(){return this.g_bpC}g_bor(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpz[5]=g,this.g_bpB(this.g_bpD.gain,g,_,n),this.g_bpB(this.g_bpE.gain,1-g,_,n)):1===e?(this.g_bpz[1]=g,this.g_bpB(this.g_bpF.frequency,g,_,n)):2===e?(this.g_bpz[2]=g,this.g_bpB(this.g_bpF.detune,g,_,n)):3===e?(this.g_bpz[3]=g,this.g_bpB(this.g_bpF.Q,g,_,n)):4===e?(this.g_bpz[4]=g,this.g_bpB(this.g_bpF.gain,g,_,n)):void 0}},self.g_boe=class extends e{constructor(e,g,_,n){super(e),this.g_W_="delay",this.g_bpz=[g,_,n],this.g_bpC=this.g_bpA(),this.g_bpD=this.g_bpA(),this.g_bpD.gain.value=n,this.g_bpE=this.g_bpA(),this.g_bpE.gain.value=1-n,this.g_bpG=this.g_bpA(),this.g_bpH=this.g_bmu.createDelay(g),this.g_bpH.delayTime.value=g,this.g_bpI=this.g_bpA(),this.g_bpI.gain.value=_,this.g_bpC.connect(this.g_bpG),this.g_bpC.connect(this.g_bpE),this.g_bpG.connect(this.g_bpD),this.g_bpG.connect(this.g_bpH),this.g_bpH.connect(this.g_bpI),this.g_bpI.connect(this.g_bpG)}g_RE(){this.g_bpC.disconnect(),this.g_bpD.disconnect(),this.g_bpE.disconnect(),this.g_bpG.disconnect(),this.g_bpH.disconnect(),this.g_bpI.disconnect(),super.g_RE()}g_bnr(e){this.g_bpD.disconnect(),this.g_bpD.connect(e),this.g_bpE.disconnect(),this.g_bpE.connect(e)}g_bnn(){return this.g_bpC}g_bor(g,n,b,t){0===g?(n=Math.max(Math.min(n/100,1),0),this.g_bpz[2]=n,this.g_bpB(this.g_bpD.gain,n,b,t),this.g_bpB(this.g_bpE.gain,1-n,b,t)):4===g?(this.g_bpz[1]=_(n),this.g_bpB(this.g_bpI.gain,_(n),b,t)):5===g?(this.g_bpz[0]=n,this.g_bpB(this.g_bpH.delayTime,n,b,t)):void 0}},self.g_bof=class extends e{constructor(e,g,_,n){super(e),this.g_W_="convolution",this.g_bpz=[_,n],this.g_bpJ="",this.g_bpK="",this.g_bpL="",this.g_bpC=this.g_bpA(),this.g_bpD=this.g_bpA(),this.g_bpD.gain.value=n,this.g_bpE=this.g_bpA(),this.g_bpE.gain.value=1-n,this.g_bpM=this.g_bmu.createConvolver(),this.g_bpM.normalize=_,this.g_bpM.buffer=g,this.g_bpC.connect(this.g_bpM),this.g_bpC.connect(this.g_bpE),this.g_bpM.connect(this.g_bpD)}g_RE(){this.g_bpC.disconnect(),this.g_bpM.disconnect(),this.g_bpD.disconnect(),this.g_bpE.disconnect(),super.g_RE()}g_bnr(e){this.g_bpD.disconnect(),this.g_bpD.connect(e),this.g_bpE.disconnect(),this.g_bpE.connect(e)}g_bnn(){return this.g_bpC}g_bor(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpz[1]=g,this.g_bpB(this.g_bpD.gain,g,_,n),this.g_bpB(this.g_bpE.gain,1-g,_,n)):void 0}g_boh(e,g,_){this.g_bpJ=e,this.g_bpK=g,this.g_bpL=_}g_bnV(){const e=super.g_bnV();return e.bufferOriginalUrl=this.g_bpJ,e.bufferUrl="",e.bufferType=this.g_bpL,e}},self.g_boi=class extends e{constructor(g,_,n,b,t,e){super(g),this.g_W_="flanger",this.g_bpz=[_,n,b,t,e],this.g_bpC=this.g_bpA(),this.g_bpE=this.g_bpA(),this.g_bpE.gain.value=1-e/2,this.g_bpD=this.g_bpA(),this.g_bpD.gain.value=e/2,this.g_bpN=this.g_bpA(),this.g_bpN.gain.value=t,this.g_bpH=this.g_bmu.createDelay(_+n),this.g_bpH.delayTime.value=_,this.g_bpO=this.g_bmu.createOscillator(),this.g_bpO.frequency.value=b,this.g_bpP=this.g_bpA(),this.g_bpP.gain.value=n,this.g_bpC.connect(this.g_bpH),this.g_bpC.connect(this.g_bpE),this.g_bpH.connect(this.g_bpD),this.g_bpH.connect(this.g_bpN),this.g_bpN.connect(this.g_bpH),this.g_bpO.connect(this.g_bpP),this.g_bpP.connect(this.g_bpH.delayTime),this.g_bpO.start(0)}g_RE(){this.g_bpO.stop(0),this.g_bpC.disconnect(),this.g_bpH.disconnect(),this.g_bpO.disconnect(),this.g_bpP.disconnect(),this.g_bpE.disconnect(),this.g_bpD.disconnect(),this.g_bpN.disconnect(),super.g_RE()}g_bnr(e){this.g_bpD.disconnect(),this.g_bpD.connect(e),this.g_bpE.disconnect(),this.g_bpE.connect(e)}g_bnn(){return this.g_bpC}g_bor(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpz[4]=g,this.g_bpB(this.g_bpD.gain,g/2,_,n),this.g_bpB(this.g_bpE.gain,1-g/2,_,n)):6===e?(this.g_bpz[1]=g/1e3,this.g_bpB(this.g_bpP.gain,g/1e3,_,n)):7===e?(this.g_bpz[2]=g,this.g_bpB(this.g_bpO.frequency,g,_,n)):8===e?(this.g_bpz[3]=g/100,this.g_bpB(this.g_bpN.gain,g/100,_,n)):void 0}},self.g_boj=class extends e{constructor(_,n,b,t,a,e,o){super(_),this.g_W_="phaser",this.g_bpz=[n,b,t,a,e,o],this.g_bpC=this.g_bpA(),this.g_bpE=this.g_bpA(),this.g_bpE.gain.value=1-o/2,this.g_bpD=this.g_bpA(),this.g_bpD.gain.value=o/2,this.g_bpF=this.g_bmu.createBiquadFilter(),this.g_bpF.type="allpass",this.g_bpF.frequency.value=n,this.g_bpF.detune.value=b,this.g_bpF.Q.value=t,this.g_bpO=this.g_bmu.createOscillator(),this.g_bpO.frequency.value=e,this.g_bpP=this.g_bpA(),this.g_bpP.gain.value=a,this.g_bpC.connect(this.g_bpF),this.g_bpC.connect(this.g_bpE),this.g_bpF.connect(this.g_bpD),this.g_bpO.connect(this.g_bpP),this.g_bpP.connect(this.g_bpF.frequency),this.g_bpO.start(0)}g_RE(){this.g_bpO.stop(0),this.g_bpC.disconnect(),this.g_bpF.disconnect(),this.g_bpO.disconnect(),this.g_bpP.disconnect(),this.g_bpE.disconnect(),this.g_bpD.disconnect(),super.g_RE()}g_bnr(e){this.g_bpD.disconnect(),this.g_bpD.connect(e),this.g_bpE.disconnect(),this.g_bpE.connect(e)}g_bnn(){return this.g_bpC}g_bor(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpz[5]=g,this.g_bpB(this.g_bpD.gain,g/2,_,n),this.g_bpB(this.g_bpE.gain,1-g/2,_,n)):1===e?(this.g_bpz[0]=g,this.g_bpB(this.g_bpF.frequency,g,_,n)):2===e?(this.g_bpz[1]=g,this.g_bpB(this.g_bpF.detune,g,_,n)):3===e?(this.g_bpz[2]=g,this.g_bpB(this.g_bpF.Q,g,_,n)):6===e?(this.g_bpz[3]=g,this.g_bpB(this.g_bpP.gain,g,_,n)):7===e?(this.g_bpz[4]=g,this.g_bpB(this.g_bpO.frequency,g,_,n)):void 0}},self.g_bok=class extends e{constructor(e,g){super(e),this.g_W_="gain",this.g_bpz=[g],this.g_bpQ=this.g_bpA(),this.g_bpQ.gain.value=g}g_RE(){this.g_bpQ.disconnect(),super.g_RE()}g_bnr(e){this.g_bpQ.disconnect(),this.g_bpQ.connect(e)}g_bnn(){return this.g_bpQ}g_bor(g,n,b,t){4===g?(this.g_bpz[0]=_(n),this.g_bpB(this.g_bpQ.gain,_(n),b,t)):void 0}},self.g_bol=class extends e{constructor(e,g,_){super(e),this.g_W_="tremolo",this.g_bpz=[g,_],this.g_bpQ=this.g_bpA(),this.g_bpQ.gain.value=1-_/2,this.g_bpO=this.g_bmu.createOscillator(),this.g_bpO.frequency.value=g,this.g_bpP=this.g_bpA(),this.g_bpP.gain.value=_/2,this.g_bpO.connect(this.g_bpP),this.g_bpP.connect(this.g_bpQ.gain),this.g_bpO.start(0)}g_RE(){this.g_bpO.stop(0),this.g_bpO.disconnect(),this.g_bpP.disconnect(),this.g_bpQ.disconnect(),super.g_RE()}g_bnr(e){this.g_bpQ.disconnect(),this.g_bpQ.connect(e)}g_bnn(){return this.g_bpQ}g_bor(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpz[1]=g,this.g_bpB(this.g_bpQ.gain.value,1-g/2,_,n),this.g_bpB(this.g_bpP.gain.value,g/2,_,n)):7===e?(this.g_bpz[0]=g,this.g_bpB(this.g_bpO.frequency,g,_,n)):void 0}},self.g_bom=class extends e{constructor(e,g,_){super(e),this.g_W_="ringmod",this.g_bpz=[g,_],this.g_bpC=this.g_bpA(),this.g_bpD=this.g_bpA(),this.g_bpD.gain.value=_,this.g_bpE=this.g_bpA(),this.g_bpE.gain.value=1-_,this.g_bpR=this.g_bpA(),this.g_bpR.gain.value=0,this.g_bpO=this.g_bmu.createOscillator(),this.g_bpO.frequency.value=g,this.g_bpO.connect(this.g_bpR.gain),this.g_bpO.start(0),this.g_bpC.connect(this.g_bpR),this.g_bpC.connect(this.g_bpE),this.g_bpR.connect(this.g_bpD)}g_RE(){this.g_bpO.stop(0),this.g_bpO.disconnect(),this.g_bpR.disconnect(),this.g_bpC.disconnect(),this.g_bpD.disconnect(),this.g_bpE.disconnect(),super.g_RE()}g_bnr(e){this.g_bpD.disconnect(),this.g_bpD.connect(e),this.g_bpE.disconnect(),this.g_bpE.connect(e)}g_bnn(){return this.g_bpC}g_bor(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpz[1]=g,this.g_bpB(this.g_bpD.gain,g,_,n),this.g_bpB(this.g_bpE.gain,1-g,_,n)):7===e?(this.g_bpz[0]=g,this.g_bpB(this.g_bpO.frequency,g,_,n)):void 0}},self.g_bon=class extends e{constructor(g,_,n,b,t,e){super(g),this.g_W_="distortion",this.g_bpz=[_,n,b,t,e],this.g_bpC=this.g_bpA(),this.g_bpS=this.g_bpA(),this.g_bpT=this.g_bpA(),this.g_bpU(b,t),this.g_bpD=this.g_bpA(),this.g_bpD.gain.value=e,this.g_bpE=this.g_bpA(),this.g_bpE.gain.value=1-e,this.g_bpV=this.g_bmu.createWaveShaper(),this.g_bpW=new Float32Array(65536),this.g_bpX(_,n),this.g_bpV.curve=this.g_bpW,this.g_bpC.connect(this.g_bpS),this.g_bpC.connect(this.g_bpE),this.g_bpS.connect(this.g_bpV),this.g_bpV.connect(this.g_bpT),this.g_bpT.connect(this.g_bpD)}g_RE(){this.g_bpC.disconnect(),this.g_bpS.disconnect(),this.g_bpV.disconnect(),this.g_bpT.disconnect(),this.g_bpD.disconnect(),this.g_bpE.disconnect(),super.g_RE()}g_bpU(e,g){.01>e&&(e=.01),this.g_bpS.gain.value=e,this.g_bpT.gain.value=Math.pow(1/e,.6)*g}g_bpX(e,g){for(let _,n=0;32768>n;++n)_=n/32768,_=this.g_bpY(_,e,g),this.g_bpW[32768+n]=_,this.g_bpW[32768-n-1]=-_}g_bpY(e,_,n){const b=1.05*n*_-_,t=0>e?-1:1,a=0>e?-e:e;let g=a<_?a:_+b*o(a-_,1/b);return g*=t,g}g_bnr(e){this.g_bpD.disconnect(),this.g_bpD.connect(e),this.g_bpE.disconnect(),this.g_bpE.connect(e)}g_bnn(){return this.g_bpC}g_bor(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bpz[4]=g,this.g_bpB(this.g_bpD.gain,g,_,n),this.g_bpB(this.g_bpE.gain,1-g,_,n)):void 0}},self.g_boo=class extends e{constructor(g,_,n,b,t,e){super(g),this.g_W_="compressor",this.g_bpz=[_,n,b,t,e],this.g_bpQ=this.g_bmu.createDynamicsCompressor(),this.g_bpQ.threshold.value=_,this.g_bpQ.knee.value=n,this.g_bpQ.ratio.value=b,this.g_bpQ.attack.value=t,this.g_bpQ.release.value=e}g_RE(){this.g_bpQ.disconnect(),super.g_RE()}g_bnr(e){this.g_bpQ.disconnect(),this.g_bpQ.connect(e)}g_bnn(){return this.g_bpQ}g_bor(){}},self.g_bop=class extends e{constructor(e,g,_){super(e),this.g_W_="analyser",this.g_bpz=[g,_],this.g_bpQ=this.g_bmu.createAnalyser(),this.g_bpQ.fftSize=g,this.g_bpQ.smoothingTimeConstant=_,this.g_bpZ=new Float32Array(this.g_bpQ.frequencyBinCount),this.g_bp_=new Uint8Array(g),this.g_bp$=0,this.g_bqa=0,this.g_boy.g_bos(this)}g_RE(){this.g_boy.g_bot(this),this.g_bpQ.disconnect(),super.g_RE()}g_asW(){this.g_bpQ.getFloatFrequencyData(this.g_bpZ),this.g_bpQ.getByteTimeDomainData(this.g_bp_);const e=this.g_bpQ.fftSize;this.g_bp$=0;let g=0;for(let _,n=0;n<e;++n)_=(this.g_bp_[n]-128)/128,0>_&&(_=-_),this.g_bp$<_&&(this.g_bp$=_),g+=_*_;this.g_bp$=t(this.g_bp$),this.g_bqa=t(Math.sqrt(g/e))}g_bnr(e){this.g_bpQ.disconnect(),this.g_bpQ.connect(e)}g_bnn(){return this.g_bpQ}g_bor(){}g_bnW(){return{tag:this.g_bnJ(),index:this.g_anm(),peak:this.g_bp$,rms:this.g_bqa,binCount:this.g_bpQ.frequencyBinCount,freqBins:this.g_bpZ}}}}